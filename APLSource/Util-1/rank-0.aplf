 rank←{
⍝ Rank any array taking ties into account
⍝⍵ Any array
⍝← Numeric vector
⍝⍎7 8 4 5.5 2.5 5.5 2.5 1←rank 5 6 3 4 2 4 2 1
     ⍝1+(+/⍵∘.>⍵)+0.5×¯1++/⍵∘.=⍵
     ⎕IO←1
     (⊂⍋g)⌷(0.5×⍳+⍸)⍨⍵[g←⍋⍵]}
